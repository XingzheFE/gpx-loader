!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["gpx-loader"]=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=ue(t),this.reject=ue(n)}function n(){}function r(e,t,n,r,c){function p(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function d(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?p(parseInt(t.substr(1).replace("x","0x"))):(c.error("entity not found:"+e),e)}function m(t){if(t>E){var n=e.substring(E,t).replace(/&#?\w+;/g,d);N&&v(E),r.characters(n,0,t-E),E=t}}function v(t,n){for(;t>=y&&(n=w.exec(e));)g=n.index,y=g+n[0].length,N.lineNumber++;N.columnNumber=t-g+1}for(var g=0,y=0,w=/.*(?:\r\n?|\n)|.*$/g,N=r.locator,b=[{currentNSMap:t}],_={},E=0;;){try{var x=e.indexOf("<",E);if(x<0){if(!e.substr(E).match(/^\s*$/)){var S=r.doc,T=S.createTextNode(e.substr(E));S.appendChild(T),r.currentElement=T}return}switch(x>E&&m(x),e.charAt(x+1)){case"/":var D=e.indexOf(">",x+3),C=e.substring(x+2,D),A=b.pop();D<0?(C=e.substring(x+2).replace(/[\s<].*/,""),c.error("end tag name: "+C+" is not complete:"+A.tagName),D=x+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),c.error("end tag name: "+C+" maybe not complete"),D=x+1+C.length);var I=A.localNSMap,O=A.tagName==C;if(O||A.tagName&&A.tagName.toLowerCase()==C.toLowerCase()){if(r.endElement(A.uri,A.localName,C),I)for(var R in I)r.endPrefixMapping(R);O||c.fatalError("end tag name: "+C+" is not match the current start tagName:"+A.tagName)}else b.push(A);D++;break;case"?":N&&v(x),D=f(e,x,r);break;case"!":N&&v(x),D=l(e,x,r,c);break;default:N&&v(x);var M=new h,P=b[b.length-1].currentNSMap,D=o(e,x,M,P,d,c),k=M.length;if(!M.closed&&s(e,D,M.tagName,_)&&(M.closed=!0,n.nbsp||c.warning("unclosed xml attribute")),N&&k){for(var L=i(N,{}),F=0;F<k;F++){var j=M[F];v(j.offset),j.locator=i(N,{})}r.locator=L,a(M,r,P)&&b.push(M),r.locator=N}else a(M,r,P)&&b.push(M);"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?D++:D=u(e,D,M.tagName,d,r)}}catch(e){c.error("element parse error: "+e),D=-1}D>E?E=D:m(Math.max(x,E)+1)}}function i(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function o(e,t,n,r,i,o){for(var a,u=++t,s=jn;;){var c=e.charAt(u);switch(c){case"=":if(s===Un)a=e.slice(t,u),s=Vn;else{if(s!==Bn)throw new Error("attribute equal must after attrName");s=Vn}break;case"'":case'"':if(s===Vn||s===Un){if(s===Un&&(o.warning('attribute value must after "="'),a=e.slice(t,u)),t=u+1,!((u=e.indexOf(c,t))>0))throw new Error("attribute value no end '"+c+"' match");l=e.slice(t,u).replace(/&#?\w+;/g,i),n.add(a,l,t-1),s=zn}else{if(s!=$n)throw new Error('attribute value must after "="');l=e.slice(t,u).replace(/&#?\w+;/g,i),n.add(a,l,t),o.warning('attribute "'+a+'" missed start quot('+c+")!!"),t=u+1,s=zn}break;case"/":switch(s){case jn:n.setTagName(e.slice(t,u));case zn:case Hn:case Gn:s=Gn,n.closed=!0;case $n:case Un:case Bn:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),s==jn&&n.setTagName(e.slice(t,u)),u;case">":switch(s){case jn:n.setTagName(e.slice(t,u));case zn:case Hn:case Gn:break;case $n:case Un:"/"===(l=e.slice(t,u)).slice(-1)&&(n.closed=!0,l=l.slice(0,-1));case Bn:s===Bn&&(l=a),s==$n?(o.warning('attribute "'+l+'" missed quot(")!!'),n.add(a,l.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&l.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),n.add(l,l,t));break;case Vn:throw new Error("attribute value missed!!")}return u;case"Â€":c=" ";default:if(c<=" ")switch(s){case jn:n.setTagName(e.slice(t,u)),s=Hn;break;case Un:a=e.slice(t,u),s=Bn;break;case $n:var l=e.slice(t,u).replace(/&#?\w+;/g,i);o.warning('attribute "'+l+'" missed quot(")!!'),n.add(a,l,t);case zn:s=Hn}else switch(s){case Bn:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=u,s=Un;break;case zn:o.warning('attribute space is required"'+a+'"!!');case Hn:s=Un,t=u;break;case Vn:s=$n,t=u;break;case Gn:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function a(e,t,n){for(var r=e.tagName,i=null,o=e.length;o--;){var a=e[o],u=a.qName,s=a.value;if((p=u.indexOf(":"))>0)var l=a.prefix=u.slice(0,p),f=u.slice(p+1),h="xmlns"===l&&f;else f=u,l=null,h="xmlns"===u&&"";a.localName=f,!1!==h&&(null==i&&(i={},c(n,n={})),n[h]=i[h]=s,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,s))}for(o=e.length;o--;)(l=(a=e[o]).prefix)&&("xml"===l&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(a.uri=n[l||""]));var p=r.indexOf(":");p>0?(l=e.prefix=r.slice(0,p),f=e.localName=r.slice(p+1)):(l=null,f=e.localName=r);var d=e.uri=n[l||""];if(t.startElement(d,f,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(d,f,r),i)for(l in i)t.endPrefixMapping(l)}function u(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return t+1}function s(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function c(e,t){for(var n in e)t[n]=e[n]}function l(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var o=d(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var u=o[1][0],s=a>3&&/^public$/i.test(o[2][0])&&o[3][0],c=a>4&&o[4][0],l=o[a-1];return n.startDTD(u,s&&s.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function f(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function h(e){}function p(e,t){return e.__proto__=t,e}function d(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}function m(e,t){for(var n in e)t[n]=e[n]}function v(e,t){var n=e.prototype;if(Object.create){var r=Object.create(t.prototype);n.__proto__=r}if(!(n instanceof t)){function i(){}i.prototype=t.prototype,m(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}function g(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,sr[e]),this.message=sr[e],Error.captureStackTrace&&Error.captureStackTrace(this,g);return n.code=e,t&&(this.message=this.message+": "+t),n}function y(){}function w(e,t){this._node=e,this._refresh=t,N(this)}function N(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);ee(e,"length",n.length),m(n,e),e._inc=t}}function b(){}function _(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function E(e,t,n,r){if(r?t[_(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&O(i,e,r),I(i,e,n))}}function x(e,t,n){var r=_(t,n);if(!(r>=0))throw g(lr,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var o=e.ownerDocument;o&&(O(o,e,n),n.ownerElement=null)}}function S(e){if(this._features={},e)for(var t in e)this._features=e[t]}function T(){}function D(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function C(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(C(e,t))return!0}while(e=e.nextSibling)}function A(){}function I(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function O(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function R(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function M(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,R(e.ownerDocument,e),t}function P(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===or){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=o:n.previousSibling=o;do{i.parentNode=e}while(i!==o&&(i=i.nextSibling));return R(e.ownerDocument||e,e),t.nodeType==or&&(t.firstChild=t.lastChild=null),t}function k(e,t){var n=t.parentNode;if(n){r=e.lastChild;n.removeChild(t);r=e.lastChild}var r=e.lastChild;return t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,R(e.ownerDocument,e,t),t}function L(){this._nsMap={}}function F(){}function j(){}function U(){}function B(){}function V(){}function $(){}function z(){}function H(){}function G(){}function X(){}function q(){}function W(){}function Y(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return Z(this,n,e,t,a),n.join("")}function Q(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return!0}function Z(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case Yn:i||(i=[]);i.length;var o=e.attributes,a=o.length,u=e.firstChild,s=e.tagName;n=qn===e.namespaceURI||n,t.push("<",s);for(c=0;c<a;c++)"xmlns"==(l=o.item(c)).prefix?i.push({prefix:l.localName,namespace:l.value}):"xmlns"==l.nodeName&&i.push({prefix:"",namespace:l.value});for(var c=0;c<a;c++){var l=o.item(c);if(Q(l,n,i)){var f=l.prefix||"",h=l.namespaceURI,p=f?" xmlns:"+f:" xmlns";t.push(p,'="',h,'"'),i.push({prefix:f,namespace:h})}Z(l,t,n,r,i)}if(Q(e,n,i)){var f=e.prefix||"",h=e.namespaceURI,p=f?" xmlns:"+f:" xmlns";t.push(p,'="',h,'"'),i.push({prefix:f,namespace:h})}if(u||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(t.push(">"),n&&/^script$/i.test(s))for(;u;)u.data?t.push(u.data):Z(u,t,n,r,i),u=u.nextSibling;else for(;u;)Z(u,t,n,r,i),u=u.nextSibling;t.push("</",s,">")}else t.push("/>");return;case rr:case or:for(u=e.firstChild;u;)Z(u,t,n,r,i),u=u.nextSibling;return;case Qn:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,D),'"');case Zn:return t.push(e.data.replace(/[<&]/g,D));case Kn:return t.push("<![CDATA[",e.data,"]]>");case nr:return t.push("\x3c!--",e.data,"--\x3e");case ir:var d=e.publicId,m=e.systemId;if(t.push("<!DOCTYPE ",e.name),d)t.push(' PUBLIC "',d),m&&"."!=m&&t.push('" "',m),t.push('">');else if(m&&"."!=m)t.push(' SYSTEM "',m,'">');else{var v=e.internalSubset;v&&t.push(" [",v,"]"),t.push(">")}return;case tr:return t.push("<?",e.target," ",e.data,"?>");case Jn:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function K(e,t,n){var r;switch(t.nodeType){case Yn:(r=t.cloneNode(!1)).ownerDocument=e;case or:break;case Qn:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(K(e,i,n)),i=i.nextSibling;return r}function J(e,t,n){var r=new t.constructor;for(var i in t){var o=t[i];"object"!=typeof o&&o!=r[i]&&(r[i]=o)}switch(t.childNodes&&(r.childNodes=new y),r.ownerDocument=e,r.nodeType){case Yn:var a=t.attributes,u=r.attributes=new b,s=a.length;u._ownerElement=r;for(var c=0;c<s;c++)r.setAttributeNode(J(e,a.item(c),!0));break;case Qn:n=!0}if(n)for(var l=t.firstChild;l;)r.appendChild(J(e,l,n)),l=l.nextSibling;return r}function ee(e,t,n){e[t]=n}var te=Math.ceil,ne=Math.floor,re=function(e){return isNaN(e=+e)?0:(e>0?ne:te)(e)},ie=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},oe=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),ae=e(function(e){var t=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=t)}),ue=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},se=function(e,t,n){if(ue(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},ce=function(e){return"object"==typeof e?null!==e:"function"==typeof e},le=function(e){if(!ce(e))throw TypeError(e+" is not an object!");return e},fe=function(e){try{return!!e()}catch(e){return!0}},he=!fe(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),pe=oe.document,de=ce(pe)&&ce(pe.createElement),me=function(e){return de?pe.createElement(e):{}},ve=!he&&!fe(function(){return 7!=Object.defineProperty(me("div"),"a",{get:function(){return 7}}).a}),ge=function(e,t){if(!ce(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!ce(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!ce(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!ce(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},ye=Object.defineProperty,we={f:he?Object.defineProperty:function(e,t,n){if(le(e),t=ge(t,!0),le(n),ve)try{return ye(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},Ne=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},be=he?function(e,t,n){return we.f(e,t,Ne(1,n))}:function(e,t,n){return e[t]=n,e},_e=function(e,t,n){var r,i,o,a=e&_e.F,u=e&_e.G,s=e&_e.S,c=e&_e.P,l=e&_e.B,f=e&_e.W,h=u?ae:ae[t]||(ae[t]={}),p=h.prototype,d=u?oe:s?oe[t]:(oe[t]||{}).prototype;u&&(n=t);for(r in n)(i=!a&&d&&void 0!==d[r])&&r in h||(o=i?d[r]:n[r],h[r]=u&&"function"!=typeof d[r]?n[r]:l&&i?se(o,oe):f&&d[r]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(o):c&&"function"==typeof o?se(Function.call,o):o,c&&((h.virtual||(h.virtual={}))[r]=o,e&_e.R&&p&&!p[r]&&be(p,r,o)))};_e.F=1,_e.G=2,_e.S=4,_e.P=8,_e.B=16,_e.W=32,_e.U=64,_e.R=128;var Ee=_e,xe=be,Se={}.hasOwnProperty,Te=function(e,t){return Se.call(e,t)},De={},Ce={}.toString,Ae=function(e){return Ce.call(e).slice(8,-1)},Ie=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Ae(e)?e.split(""):Object(e)},Oe=function(e){return Ie(ie(e))},Re=Math.min,Me=function(e){return e>0?Re(re(e),9007199254740991):0},Pe=Math.max,ke=Math.min,Le=function(e,t){return(e=re(e))<0?Pe(e+t,0):ke(e,t)},Fe=oe["__core-js_shared__"]||(oe["__core-js_shared__"]={}),je=function(e){return Fe[e]||(Fe[e]={})},Ue=0,Be=Math.random(),Ve=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++Ue+Be).toString(36))},$e=je("keys"),ze=function(e){return $e[e]||($e[e]=Ve(e))},He=function(e){return function(t,n,r){var i,o=Oe(t),a=Me(o.length),u=Le(r,a);if(e&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((e||u in o)&&o[u]===n)return e||u||0;return!e&&-1}}(!1),Ge=ze("IE_PROTO"),Xe=function(e,t){var n,r=Oe(e),i=0,o=[];for(n in r)n!=Ge&&Te(r,n)&&o.push(n);for(;t.length>i;)Te(r,n=t[i++])&&(~He(o,n)||o.push(n));return o},qe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),We=Object.keys||function(e){return Xe(e,qe)},Ye=he?Object.defineProperties:function(e,t){le(e);for(var n,r=We(t),i=r.length,o=0;i>o;)we.f(e,n=r[o++],t[n]);return e},Qe=oe.document,Ze=Qe&&Qe.documentElement,Ke=ze("IE_PROTO"),Je=function(){},et=function(){var e,t=me("iframe"),n=qe.length;for(t.style.display="none",Ze.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),et=e.F;n--;)delete et.prototype[qe[n]];return et()},tt=Object.create||function(e,t){var n;return null!==e?(Je.prototype=le(e),n=new Je,Je.prototype=null,n[Ke]=e):n=et(),void 0===t?n:Ye(n,t)},nt=e(function(e){var t=je("wks"),n=oe.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:Ve)("Symbol."+e))}).store=t}),rt=we.f,it=nt("toStringTag"),ot=function(e,t,n){e&&!Te(e=n?e:e.prototype,it)&&rt(e,it,{configurable:!0,value:t})},at={};be(at,nt("iterator"),function(){return this});var ut=function(e,t,n){e.prototype=tt(at,{next:Ne(1,n)}),ot(e,t+" Iterator")},st=function(e){return Object(ie(e))},ct=ze("IE_PROTO"),lt=Object.prototype,ft=Object.getPrototypeOf||function(e){return e=st(e),Te(e,ct)?e[ct]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?lt:null},ht=nt("iterator"),pt=!([].keys&&"next"in[].keys()),dt=function(){return this},mt=function(e,t,n,r,i,o,a){ut(n,t,r);var u,s,c,l=function(e){if(!pt&&e in d)return d[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",h="values"==i,p=!1,d=e.prototype,m=d[ht]||d["@@iterator"]||i&&d[i],v=m||l(i),g=i?h?l("entries"):v:void 0,y="Array"==t?d.entries||m:m;if(y&&(c=ft(y.call(new e)))!==Object.prototype&&c.next&&ot(c,f,!0),h&&m&&"values"!==m.name&&(p=!0,v=function(){return m.call(this)}),a&&(pt||p||!d[ht])&&be(d,ht,v),De[t]=v,De[f]=dt,i)if(u={values:h?v:l("values"),keys:o?v:l("keys"),entries:g},a)for(s in u)s in d||xe(d,s,u[s]);else Ee(Ee.P+Ee.F*(pt||p),t,u);return u},vt=function(e){return function(t,n){var r,i,o=String(ie(t)),a=re(n),u=o.length;return a<0||a>=u?e?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}(!0);mt(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=vt(t,n),this._i+=e.length,{value:e,done:!1})});var gt=function(){},yt=function(e,t){return{value:t,done:!!e}};mt(Array,"Array",function(e,t){this._t=Oe(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,yt(1)):"keys"==t?yt(0,n):"values"==t?yt(0,e[n]):yt(0,[n,e[n]])},"values");De.Arguments=De.Array,gt(),gt(),gt();for(var wt=nt("toStringTag"),Nt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),bt=0;bt<Nt.length;bt++){var _t=Nt[bt],Et=oe[_t],xt=Et&&Et.prototype;xt&&!xt[wt]&&be(xt,wt,_t),De[_t]=De.Array}var St,Tt,Dt,Ct=nt("toStringTag"),At="Arguments"==Ae(function(){return arguments}()),It=function(e,t){try{return e[t]}catch(e){}},Ot=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=It(t=Object(e),Ct))?n:At?Ae(t):"Object"==(r=Ae(t))&&"function"==typeof t.callee?"Arguments":r},Rt=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e},Mt=function(e,t,n,r){try{return r?t(le(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&le(i.call(e)),t}},Pt=nt("iterator"),kt=Array.prototype,Lt=function(e){return void 0!==e&&(De.Array===e||kt[Pt]===e)},Ft=nt("iterator"),jt=ae.getIteratorMethod=function(e){if(void 0!=e)return e[Ft]||e["@@iterator"]||De[Ot(e)]},Ut=e(function(e){var t={},n={},r=e.exports=function(e,r,i,o,a){var u,s,c,l,f=a?function(){return e}:jt(e),h=se(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(Lt(f)){for(u=Me(e.length);u>p;p++)if((l=r?h(le(s=e[p])[0],s[1]):h(e[p]))===t||l===n)return l}else for(c=f.call(e);!(s=c.next()).done;)if((l=Mt(c,h,s.value,r))===t||l===n)return l};r.BREAK=t,r.RETURN=n}),Bt=nt("species"),Vt=function(e,t){var n,r=le(e).constructor;return void 0===r||void 0==(n=le(r)[Bt])?t:ue(n)},$t=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)},zt=oe.process,Ht=oe.setImmediate,Gt=oe.clearImmediate,Xt=oe.MessageChannel,qt=oe.Dispatch,Wt=0,Yt={},Qt=function(){var e=+this;if(Yt.hasOwnProperty(e)){var t=Yt[e];delete Yt[e],t()}},Zt=function(e){Qt.call(e.data)};Ht&&Gt||(Ht=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Yt[++Wt]=function(){$t("function"==typeof e?e:Function(e),t)},St(Wt),Wt},Gt=function(e){delete Yt[e]},"process"==Ae(zt)?St=function(e){zt.nextTick(se(Qt,e,1))}:qt&&qt.now?St=function(e){qt.now(se(Qt,e,1))}:Xt?(Dt=(Tt=new Xt).port2,Tt.port1.onmessage=Zt,St=se(Dt.postMessage,Dt,1)):oe.addEventListener&&"function"==typeof postMessage&&!oe.importScripts?(St=function(e){oe.postMessage(e+"","*")},oe.addEventListener("message",Zt,!1)):St="onreadystatechange"in me("script")?function(e){Ze.appendChild(me("script")).onreadystatechange=function(){Ze.removeChild(this),Qt.call(e)}}:function(e){setTimeout(se(Qt,e,1),0)});var Kt={set:Ht,clear:Gt},Jt=Kt.set,en=oe.MutationObserver||oe.WebKitMutationObserver,tn=oe.process,nn=oe.Promise,rn="process"==Ae(tn),on={f:function(e){return new t(e)}},an=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},un=function(e,t){var n=on.f(e);return(0,n.resolve)(t),n.promise},sn=nt("species"),cn=nt("iterator"),ln=!1;try{var fn=[7][cn]();fn.return=function(){ln=!0},Array.from(fn,function(){throw 2})}catch(e){}var hn,pn,dn,mn,vn=Kt.set,gn=function(){var e,t,n,r=function(){var r,i;for(rn&&(r=tn.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(rn)n=function(){tn.nextTick(r)};else if(en){var i=!0,o=document.createTextNode("");new en(r).observe(o,{characterData:!0}),n=function(){o.data=i=!i}}else if(nn&&nn.resolve){var a=nn.resolve();n=function(){a.then(r)}}else n=function(){Jt.call(oe,r)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}(),yn=oe.TypeError,wn=oe.process,Nn=oe.Promise,bn="process"==Ot(wn),_n=function(){},En=pn=on.f,xn=!!function(){try{var e=Nn.resolve(1),t=(e.constructor={})[nt("species")]=function(e){e(_n,_n)};return(bn||"function"==typeof PromiseRejectionEvent)&&e.then(_n)instanceof t}catch(e){}}(),Sn=function(e,t){return e===t||e===Nn&&t===mn},Tn=function(e){var t;return!(!ce(e)||"function"!=typeof(t=e.then))&&t},Dn=function(e,t){if(!e._n){e._n=!0;var n=e._c;gn(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,u=t.resolve,s=t.reject,c=t.domain;try{a?(i||(2==e._h&&In(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?s(yn("Promise-chain cycle")):(o=Tn(n))?o.call(n,u,s):u(n)):s(r)}catch(e){s(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&Cn(e)})}},Cn=function(e){vn.call(oe,function(){var t,n,r,i=e._v,o=An(e);if(o&&(t=an(function(){bn?wn.emit("unhandledRejection",i,e):(n=oe.onunhandledrejection)?n({promise:e,reason:i}):(r=oe.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=bn||An(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},An=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if((t=n[r++]).fail||!An(t.promise))return!1;return!0},In=function(e){vn.call(oe,function(){var t;bn?wn.emit("rejectionHandled",e):(t=oe.onrejectionhandled)&&t({promise:e,reason:e._v})})},On=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Dn(t,!0))},Rn=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw yn("Promise can't be resolved itself");(t=Tn(e))?gn(function(){var r={_w:n,_d:!1};try{t.call(e,se(Rn,r,1),se(On,r,1))}catch(e){On.call(r,e)}}):(n._v=e,n._s=1,Dn(n,!1))}catch(e){On.call({_w:n,_d:!1},e)}}};xn||(Nn=function(e){Rt(this,Nn,"Promise","_h"),ue(e),hn.call(this);try{e(se(Rn,this,1),se(On,this,1))}catch(e){On.call(this,e)}},(hn=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:be(e,r,t[r]);return e}(Nn.prototype,{then:function(e,t){var n=En(Vt(this,Nn));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=bn?wn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Dn(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),dn=function(){var e=new hn;this.promise=e,this.resolve=se(Rn,e,1),this.reject=se(On,e,1)},on.f=En=function(e){return Sn(Nn,e)?new dn(e):pn(e)}),Ee(Ee.G+Ee.W+Ee.F*!xn,{Promise:Nn}),ot(Nn,"Promise"),function(e){var t="function"==typeof ae[e]?ae[e]:oe[e];he&&t&&!t[sn]&&we.f(t,sn,{configurable:!0,get:function(){return this}})}("Promise"),mn=ae.Promise,Ee(Ee.S+Ee.F*!xn,"Promise",{reject:function(e){var t=En(this);return(0,t.reject)(e),t.promise}}),Ee(Ee.S+!0*Ee.F,"Promise",{resolve:function(e){return e instanceof Nn&&Sn(e.constructor,this)?e:un(this,e)}}),Ee(Ee.S+Ee.F*!(xn&&function(e,t){if(!t&&!ln)return!1;var n=!1;try{var r=[7],i=r[cn]();i.next=function(){return{done:n=!0}},r[cn]=function(){return i},e(r)}catch(e){}return n}(function(e){Nn.all(e).catch(_n)})),"Promise",{all:function(e){var t=this,n=En(t),r=n.resolve,i=n.reject,o=an(function(){var n=[],o=0,a=1;Ut(e,!1,function(e){var u=o++,s=!1;n.push(void 0),a++,t.resolve(e).then(function(e){s||(s=!0,n[u]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=En(t),r=n.reject,i=an(function(){Ut(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),Ee(Ee.P+Ee.R,"Promise",{finally:function(e){var t=Vt(this,ae.Promise||oe.Promise),n="function"==typeof e;return this.then(n?function(n){return un(t,e()).then(function(){return n})}:e,n?function(n){return un(t,e()).then(function(){throw n})}:e)}}),Ee(Ee.S,"Promise",{try:function(e){var t=on.f(this),n=an(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var Mn=ae.Promise,Pn=function(e){return e&&e.__esModule?e.default:e}(e(function(e){e.exports={default:Mn,__esModule:!0}})),kn=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ln=new RegExp("[\\-\\.0-9"+kn.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Fn=new RegExp("^"+kn.source+Ln.source+"*(?::"+kn.source+Ln.source+"*)?$"),jn=0,Un=1,Bn=2,Vn=3,$n=4,zn=5,Hn=6,Gn=7;n.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),c(t,t={}),r(e,t,n,i,this.errorHandler),i.endDocument()}},h.prototype={setTagName:function(e){if(!Fn.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!Fn.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},p({},p.prototype)instanceof p||(p=function(e,t){function n(){}n.prototype=t,n=new n;for(t in e)n[t]=e[t];return n});var Xn={XMLReader:n},qn="http://www.w3.org/1999/xhtml",Wn={},Yn=Wn.ELEMENT_NODE=1,Qn=Wn.ATTRIBUTE_NODE=2,Zn=Wn.TEXT_NODE=3,Kn=Wn.CDATA_SECTION_NODE=4,Jn=Wn.ENTITY_REFERENCE_NODE=5,er=Wn.ENTITY_NODE=6,tr=Wn.PROCESSING_INSTRUCTION_NODE=7,nr=Wn.COMMENT_NODE=8,rr=Wn.DOCUMENT_NODE=9,ir=Wn.DOCUMENT_TYPE_NODE=10,or=Wn.DOCUMENT_FRAGMENT_NODE=11,ar=Wn.NOTATION_NODE=12,ur={},sr={},cr=(ur.INDEX_SIZE_ERR=(sr[1]="Index size error",1),ur.DOMSTRING_SIZE_ERR=(sr[2]="DOMString size error",2),ur.HIERARCHY_REQUEST_ERR=(sr[3]="Hierarchy request error",3)),lr=(ur.WRONG_DOCUMENT_ERR=(sr[4]="Wrong document",4),ur.INVALID_CHARACTER_ERR=(sr[5]="Invalid character",5),ur.NO_DATA_ALLOWED_ERR=(sr[6]="No data allowed",6),ur.NO_MODIFICATION_ALLOWED_ERR=(sr[7]="No modification allowed",7),ur.NOT_FOUND_ERR=(sr[8]="Not found",8)),fr=(ur.NOT_SUPPORTED_ERR=(sr[9]="Not supported",9),ur.INUSE_ATTRIBUTE_ERR=(sr[10]="Attribute in use",10));ur.INVALID_STATE_ERR=(sr[11]="Invalid state",11),ur.SYNTAX_ERR=(sr[12]="Syntax error",12),ur.INVALID_MODIFICATION_ERR=(sr[13]="Invalid modification",13),ur.NAMESPACE_ERR=(sr[14]="Invalid namespace",14),ur.INVALID_ACCESS_ERR=(sr[15]="Invalid access",15);g.prototype=Error.prototype,m(ur,g),y.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)Z(this[r],n,e,t);return n.join("")}},w.prototype.item=function(e){return N(this),this[e]},v(w,y),b.prototype={length:0,item:y.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new g(fr);var n=this.getNamedItem(e.nodeName);return E(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new g(fr);return t=this.getNamedItemNS(e.namespaceURI,e.localName),E(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return x(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return x(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},S.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new A;if(r.implementation=this,r.childNodes=new y,r.doctype=n,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new $;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},T.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return P(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return M(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return J(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Zn&&e.nodeType==Zn?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==Qn?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==Qn?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},m(Wn,T),m(Wn,T.prototype),A.prototype={nodeName:"#document",nodeType:rr,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==or){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==Yn&&(this.documentElement=e),P(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),M(this,e)},importNode:function(e,t){return K(this,e,t)},getElementById:function(e){var t=null;return C(this.documentElement,function(n){if(n.nodeType==Yn&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new L;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new y,(t.attributes=new b)._ownerElement=t,t},createDocumentFragment:function(){var e=new X;return e.ownerDocument=this,e.childNodes=new y,e},createTextNode:function(e){var t=new U;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new B;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new q;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new F;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new G;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new L,r=t.split(":"),i=n.attributes=new b;return n.childNodes=new y,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new F,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},v(A,T),L.prototype={nodeType:Yn,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===or?this.insertBefore(e,null):k(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new w(this,function(t){var n=[];return C(t,function(r){r===t||r.nodeType!=Yn||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new w(this,function(n){var r=[];return C(n,function(i){i===n||i.nodeType!==Yn||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)}),r})}},A.prototype.getElementsByTagName=L.prototype.getElementsByTagName,A.prototype.getElementsByTagNameNS=L.prototype.getElementsByTagNameNS,v(L,T),F.prototype.nodeType=Qn,v(F,T),j.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(sr[cr])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},v(j,T),U.prototype={nodeName:"#text",nodeType:Zn,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},v(U,j),B.prototype={nodeName:"#comment",nodeType:nr},v(B,j),V.prototype={nodeName:"#cdata-section",nodeType:Kn},v(V,j),$.prototype.nodeType=ir,v($,T),z.prototype.nodeType=ar,v(z,T),H.prototype.nodeType=er,v(H,T),G.prototype.nodeType=Jn,v(G,T),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=or,v(X,T),q.prototype.nodeType=tr,v(q,T),W.prototype.serializeToString=function(e,t,n){return Y.call(e,t,n)},T.prototype.toString=Y;try{if(Object.defineProperty){Object.defineProperty(w.prototype,"length",{get:function(){return N(this),this.$$length}}),Object.defineProperty(T.prototype,"textContent",{get:function(){return hr(this)},set:function(e){switch(this.nodeType){case Yn:case or:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}});function hr(e){switch(e.nodeType){case Yn:case or:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(hr(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}ee=function(e,t,n){e["$$"+t]=n}}}catch(e){}var pr={DOMImplementation:S,XMLSerializer:W},dr=e(function(e,t){function n(e){this.options=e||{locator:{}}}function r(e,t,n){function r(t){var r=e[t];!r&&u&&(r=2==e.length?function(n){e(t,n)}:e),o[t]=r&&function(e){r("[xmldom "+t+"]\t"+e+a(n))}||function(){}}if(!e){if(t instanceof i)return t;e=t}var o={},u=e instanceof Function;return n=n||{},r("warning"),r("error"),r("fatalError"),o}function i(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function u(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var n=this.options,o=new c,a=n.domBuilder||new i,u=n.errorHandler,s=n.locator,l=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&a.setDocumentLocator(s),o.errorHandler=r(u,a,s),o.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(f.nbsp="Â ",f.copy="Â©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?o.parse(e,l,f):o.errorHandler.error("invalid doc source"),a.doc},i.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,a=i.createElementNS(e,n||t),u=r.length;s(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var c=0;c<u;c++){var e=r.getURI(c),l=r.getValue(c),n=r.getQName(c),f=i.createAttributeNS(e,n);this.locator&&o(r.getLocator(c),f),f.value=f.nodeValue=l,a.setAttributeNode(f)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),s(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=u.apply(this,arguments)){if(this.cdata)r=this.doc.createCDATASection(e);else var r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=u.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&o(this.locator,r),s(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&o(this.locator,i),s(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){i.prototype[e]=function(){return null}});var c=Xn.XMLReader,l=t.DOMImplementation=pr.DOMImplementation;t.XMLSerializer=pr.XMLSerializer,t.DOMParser=n}),mr=dr.DOMParser,vr=e(function(e,t){var n=function(){function e(e){if(!e||!e.length)return 0;for(var t=0,n=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return n}function t(e,t){return e.getElementsByTagName(t)}function n(e,t){return e.getAttribute(t)}function r(e,t){return parseFloat(n(e,t))}function i(e,n){var r=t(e,n);return r.length?r[0]:null}function o(e){return e.normalize&&e.normalize(),e}function a(e){for(var t=0,n=[];t<e.length;t++)n[t]=parseFloat(e[t]);return n}function u(e){return e&&o(e),e&&e.textContent||""}function s(e,t){var n,r,o={};for(r=0;r<t.length;r++)(n=i(e,t[r]))&&(o[t[r]]=u(n));return o}function c(e,t){for(var n in t)e[n]=t[n]}function l(e){return a(e.replace(m,"").split(","))}function f(e){for(var t=e.replace(v,"").split(g),n=[],r=0;r<t.length;r++)n.push(l(t[r]));return n}function h(e){var t,n=[r(e,"lon"),r(e,"lat")],o=i(e,"ele"),a=i(e,"gpxtpx:hr")||i(e,"hr"),s=i(e,"time");return o&&(t=parseFloat(u(o)),isNaN(t)||n.push(t)),{coordinates:n,time:s?u(s):null,heartRate:a?parseFloat(u(a)):null}}function p(e){return void 0!==e.xml?e.xml:d.serializeToString(e)}var d,m=/\s*/g,v=/^\s*|\s*$/g,g=/\s+/;return"undefined"!=typeof XMLSerializer?d=new XMLSerializer:"object"!=typeof process||process.browser||(d=new dr.XMLSerializer),{kml:function(r){function o(e){var t,n;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(n=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(n)?void 0:n]}function s(e){return a(e.split(" "))}function c(e){var n=t(e,"coord","gx"),r=[],i=[];0===n.length&&(n=t(e,"gx:coord"));for(var o=0;o<n.length;o++)r.push(s(u(n[o])));for(var a=t(e,"when"),c=0;c<a.length;c++)i.push(u(a[c]));return{coords:r,times:i}}function h(e){var n,r,o,a,s,p=[],d=[];if(i(e,"MultiGeometry"))return h(i(e,"MultiGeometry"));if(i(e,"MultiTrack"))return h(i(e,"MultiTrack"));if(i(e,"gx:MultiTrack"))return h(i(e,"gx:MultiTrack"));for(o=0;o<y.length;o++)if(r=t(e,y[o]))for(a=0;a<r.length;a++)if(n=r[a],"Point"===y[o])p.push({type:"Point",coordinates:l(u(i(n,"coordinates")))});else if("LineString"===y[o])p.push({type:"LineString",coordinates:f(u(i(n,"coordinates")))});else if("Polygon"===y[o]){var m=t(n,"LinearRing"),v=[];for(s=0;s<m.length;s++)v.push(f(u(i(m[s],"coordinates"))));p.push({type:"Polygon",coordinates:v})}else if("Track"===y[o]||"gx:Track"===y[o]){var g=c(n);p.push({type:"LineString",coordinates:g.coords}),g.times.length&&d.push(g.times)}return{geoms:p,coordTimes:d}}for(var d={type:"FeatureCollection",features:[]},m={},v={},g={},y=["Polygon","LineString","Point","Track","gx:Track"],w=t(r,"Placemark"),N=t(r,"Style"),b=t(r,"StyleMap"),_=0;_<N.length;_++){var E=e(p(N[_])).toString(16);m["#"+n(N[_],"id")]=E,v[E]=N[_]}for(var x=0;x<b.length;x++){m["#"+n(b[x],"id")]=e(p(b[x])).toString(16);for(var S=t(b[x],"Pair"),T={},D=0;D<S.length;D++)T[u(i(S[D],"key"))]=u(i(S[D],"styleUrl"));g["#"+n(b[x],"id")]=T}for(var C=0;C<w.length;C++)d.features=d.features.concat(function(e){var r,a=h(e),s={},c=u(i(e,"name")),l=u(i(e,"styleUrl")),f=u(i(e,"description")),p=i(e,"TimeSpan"),d=i(e,"TimeStamp"),y=i(e,"ExtendedData"),w=i(e,"LineStyle"),N=i(e,"PolyStyle"),b=i(e,"visibility");if(!a.geoms.length)return[];if(c&&(s.name=c),l){"#"!==l[0]&&(l="#"+l),s.styleUrl=l,m[l]&&(s.styleHash=m[l]),g[l]&&(s.styleMapHash=g[l],s.styleHash=m[g[l].normal]);var _=v[s.styleHash];_&&(w||(w=i(_,"LineStyle")),N||(N=i(_,"PolyStyle")))}if(f&&(s.description=f),p){var E=u(i(p,"begin")),x=u(i(p,"end"));s.timespan={begin:E,end:x}}if(d&&(s.timestamp=u(i(d,"when"))),w){var S=o(u(i(w,"color"))),T=S[0],D=S[1],C=parseFloat(u(i(w,"width")));T&&(s.stroke=T),isNaN(D)||(s["stroke-opacity"]=D),isNaN(C)||(s["stroke-width"]=C)}if(N){var A=o(u(i(N,"color"))),I=A[0],O=A[1],R=u(i(N,"fill")),M=u(i(N,"outline"));I&&(s.fill=I),isNaN(O)||(s["fill-opacity"]=O),R&&(s["fill-opacity"]="1"===R?s["fill-opacity"]||1:0),M&&(s["stroke-opacity"]="1"===M?s["stroke-opacity"]||1:0)}if(y){var P=t(y,"Data"),k=t(y,"SimpleData");for(r=0;r<P.length;r++)s[P[r].getAttribute("name")]=u(i(P[r],"value"));for(r=0;r<k.length;r++)s[k[r].getAttribute("name")]=u(k[r])}b&&(s.visibility=u(b)),a.coordTimes.length&&(s.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var L={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:s};return n(e,"id")&&(L.id=n(e,"id")),[L]}(w[C]));return d},gpx:function(e){function r(e,n){var r=t(e,n),i=[],o=[],a=[],u=r.length;if(u<2)return{};for(var s=0;s<u;s++){var c=h(r[s]);i.push(c.coordinates),c.time&&o.push(c.time),c.heartRate&&a.push(c.heartRate)}return{line:i,times:o,heartRates:a}}function i(e){var r,i;r=s(e,["name","cmt","desc","time","keywords"]),(i=t(e,"link")).length&&(r.links=[]);for(var o,a=0;a<i.length;a++)c(o={href:n(i[a],"href")},s(i[a],["text","type"])),r.links.push(o);return r}var o,a,u=t(e,"trk"),l=t(e,"rte"),f=t(e,"wpt"),p={type:"FeatureCollection",features:[]};for(o=0;o<u.length;o++)(a=function(e){for(var n,o=t(e,"trkseg"),a=[],u=[],s=[],c=0;c<o.length;c++)(n=r(o[c],"trkpt"))&&(n.line&&a.push(n.line),n.times&&n.times.length&&u.push(n.times),n.heartRates&&n.heartRates.length&&s.push(n.heartRates));if(0!==a.length){var l=i(e);return u.length&&(l.coordTimes=1===a.length?u[0]:u),s.length&&(l.heartRates=1===a.length?s[0]:s),{type:"Feature",properties:l,geometry:{type:1===a.length?"LineString":"MultiLineString",coordinates:1===a.length?a[0]:a}}}}(u[o]))&&p.features.push(a);for(o=0;o<l.length;o++)(a=function(e){var t=r(e,"rtept");if(t.line)return{type:"Feature",properties:i(e),geometry:{type:"LineString",coordinates:t.line}}}(l[o]))&&p.features.push(a);for(o=0;o<f.length;o++)p.features.push(function(e){var t=i(e);return c(t,s(e,["sym","type"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:h(e).coordinates}}}(f[o]));return p}}}();e.exports=n});return{reader:new FileReader,parser:new mr,read:function(e){var t=this;return this.reader.readAsText(e),new Pn(function(e,n){t.reader.onload=function(n){var r=n.target.result;r=t.parser.parseFromString(r,"application/xml"),r=vr.gpx(r),e(r)},t.reader.onerror=function(e){n(e)}})}}});
